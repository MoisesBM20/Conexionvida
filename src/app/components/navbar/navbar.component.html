<header class="navbar-container">
    <div class="left-section">
        <a href="#" class="logo-link" aria-label="Ir a la página de inicio">
            <div class="logo-section">
                <img src="./assets/images/logo.png" alt="Gane Logo" class="logo" />
            </div>
        </a>
        <div class="search-section">
            <input
                class="search-input"
                type="text"
                placeholder="Buscar..."
                [(ngModel)]="searchQuery"
                (ngModelChange)="onSearch()"
                (keyup.enter)="onSearch()"
                aria-label="Buscar en la página"
            />
            <button class="search-button" type="button" (click)="onSearch()" aria-label="Buscar">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
            </button> 
            <button class="clear-button" *ngIf="searchQuery" (click)="clearSearch()" aria-label="Limpiar búsqueda">X</button>
            
            <!-- El div 'search-results' ahora es un shijo directo de 'search-section' -->
            <div class="search-results" *ngIf="searchQuery">
                <div *ngIf="filteredItems.length > 0">
                    <h3>Resultados de la búsqueda:</h3>
                    <ul>
                        <li *ngFor="let item of filteredItems" (click)="navigateTo(item)" class="clickable" tabindex="0" (keyup.enter)="navigateTo(item)">
                            <a [href]="item.isExternal ? item.url : null" [routerLink]="!item.isExternal ? item.url : null">{{ item.text }}</a>
                        </li>
                    </ul>
                </div>
                <div *ngIf="filteredItems.length === 0" class="no-results">
                    <p>No se encontraron resultados para "{{ searchQuery }}".</p>
                </div>
            </div>
        </div>
    </div>

    <nav class="navigation-section" [class.open]="menuOpen">
        <ul>
            <li><a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">INICIO</a></li>
            <li><a routerLink="/team" routerLinkActive="active">EQUIPO</a></li>
            <li><a href="/agreement">CONVENIOS</a></li>
            <li class="dropdown">
                <a href="##" (click)="$event.preventDefault()">
                    CULTURA MÁS CERCA DE TI
                    <svg class="dropdown-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
                </a>
                <div class="dropdown-menu">
                    <ul>
                        <li>
                            <a href="/attraction">
                                <span class="item-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                        <rect x="3" y="2" width="14" height="20" rx="2"/>
                                        <path d="M21 7v10"/>
                                        <circle cx="7" cy="12" r="1"/>
                                    </svg>
                                </span>
                                <span class="item-text">
                                    <span class="item-title">Talento Gane</span>
                                    <span class="item-description">Talento que nos conecta</span>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="/stars">
                                <span class="item-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                                </span>
                                <span class="item-text">
                                    <span class="item-title">Noche de Estrellas</span>
                                    <span class="item-description">Reconocemos tu dedicación</span>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="/ganefamily">
                                <span class="item-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                                </span>
                                <span class="item-text">
                                    <span class="item-title">Gane Familias</span>
                                    <span class="item-description">Unimos a los que más quieres</span>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="/pensioner">
                                <span class="item-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline></svg>
                                </span>
                                <span class="item-text">
                                    <span class="item-title">Pensionados</span>
                                    <span class="item-description">Agradecemos tu trayectoria</span>
                                </span>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>
        </ul>
    </nav>
</header>
